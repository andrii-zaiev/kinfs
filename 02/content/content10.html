<html xmlns="http://www.w3.org/1999/xhtml"><head><meta name="generator" content="LERSUS 3.3.0.0" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Корпоративные информационные системы — Теория — Работа со словарем данных</title><script language="javascript" type="text/javascript" src="../../00/styles/files/apiwrapper.js"> </script><script language="javascript" type="text/javascript" src="../../00/styles/files/sco.js"> </script><link href="../../00/styles/files/style.css" rel="stylesheet" type="text/css" /></head><body><table id="mainOuter"><tr><td id="topOuter"><table id="topInner"><tr class="row1"><td class="cell1"><div> </div></td><td class="cell2"><div> </div></td><td class="cell3"><div> </div></td><td class="cell4" id="shortcuts"><div><ul class="level0"><li><a href="../../00/content/authors1.html">Авторы</a></li><li>|</li><li><a href="../../00/content/contacts1.html">Контакты</a></li><li>|</li><li><a href="../../00/content/instructions1.html">Методические указания</a></li><li>|</li><li><a href="../../00/content/annotation1.html">Аннотация</a></li><li>|</li><li><a href="#" onclick="history.back(); return false;">Назад</a></li></ul></div></td></tr><tr class="row2"><td class="cell1"><div> </div></td><td class="cell2"><div> </div></td><td class="cell3"><div> </div></td><td class="cell4"><div id="courseTitle">Корпоративные информационные системы</div><div id="courseSubTitle">Физическая организация БД на примере СУБД Oracle : Работа со словарем данных</div></td></tr></table></td></tr><tr><td id="contentOuter"><table id="contentInner"><tr><td class="menuOuter"><table class="menuInner"><tr><td><ul class="level0"><li><a href="../../00/styles/courses.html">Содержание курса</a></li><li><span>Теория</span></li><ul class="level1"><li><a href="../../02/content/content1.html">Основные концепции СУБД Oracle</a></li><li><a href="../../02/content/content2.html">Логическая структура</a></li><li><a href="../../02/content/content3.html">Экстенты и сегменты</a></li><li><a href="../../02/content/content4.html">Табличные пространства и файлы данных </a></li><li><a href="../../02/content/content5.html">Процессы инстанции Oracle </a></li><li><a href="../../02/content/content6.html">Структуры памяти ORACLE</a></li><li><a href="../../02/content/content7.html">Создание таблиц с распределением памяти </a></li><li><a href="../../02/content/content8.html">Объекты базы данных</a></li><li><a href="../../02/content/content9.html">Утилита SQL*Plus</a></li><li><a href="../../02/content/content10.html">Работа со словарем данных</a></li><li><a href="../../02/content/content11.html">Введение в аудитинг</a></li></ul><li><span>Практика</span></li><ul class="level1"><li><a href="../../02/content/example1.html">Практика 1. Настройка структур памяти при создании основных объектов БД</a></li><li><a href="../../02/content/example2.html">Лабораторная работа 1. Работа с основными объектами базы и служебной информацией</a></li></ul><li><span>Текущий контроль знаний</span></li><ul class="level1"><li><a href="../../02/content/multiply-choice-test1.html">Введение в сервер Oracle</a></li><li><a href="../../02/content/multiply-choice-test9.html">Объекты схемы базы данных Oracle</a></li></ul><li><a href="../../02/styles/glossary.html">Словарь терминов</a></li><li><a href="../../02/02.pdf" target="_blank">Версия для печати</a></li></ul></td></tr></table></td><td class="content"><div id="content"><div id="topBlankStripe"> </div><span id="lnk0f59b11bfa134bfabf55304c3790941c"> </span><h1 align="left" class="headline-source">     Работа со словарем данных</h1><span id="lnk1bee3b4c280642de8800d83a59df7be5"> </span><div class="section"><p align="justify" class="paragraph-source">     <i><b>Словарь данных</b></i> - не только центральное хранилище в каждой базе данных ORACLE. Это также важный инструмент для всех пользователей, от конечных пользователей до разработчиков приложений и администраторов базы данных. Даже начинающие пользователи могут извлекать выгоду из понимания и использования словаря данных. </p><p align="justify" class="paragraph-source">     Однако ни один пользователь не должен никогда изменять (обновлять, удалять или вставлять) никакие строки или объекты в словаре данных; такие действия могут нарушить целостность данных.</p></div><span id="lnkf63ef62dd4da4a23b3043345bed5e712"> </span><div class="section"><p align="justify" class="paragraph-source">     Словарь данных является одной из важнейших частей базы данных ORACLE. </p><p align="justify" class="paragraph-source">     СЛОВАРЬ ДАННЫХ - это набор таблиц, используемых как ТОЛЬКО-ЧИТАЕМЫЙ справочник, который предоставляет информацию об ассоциированной с ним базе данных. </p><p align="justify" class="paragraph-source">     Например, словарь данных может предоставлять следующую информацию:</p><p align="justify" class="paragraph-source">     - имена пользователей ORACLE;</p><p align="justify" class="paragraph-source">     - привилегии и роли, которые были предоставлены каждому пользователю;</p><p align="justify" class="paragraph-source">     - имена объектов схем (таблиц, обзоров, снимков, индексов, кластеров, синонимов, последовательностей, процедур, функций, пакетов, триггеров и т.д.);</p><p align="justify" class="paragraph-source">     - информацию об ограничениях целостности;</p><p align="justify" class="paragraph-source">     - умалчиваемые значения для столбцов;</p><p align="justify" class="paragraph-source">     - сколько пространства было распределено и в настоящее время используется объектами в базе данных;</p><p align="justify" class="paragraph-source">     - информацию аудитинга, например, кто обращался к различным объектам и обновлял их;</p><p align="justify" class="paragraph-source">     - другую общую информацию о базе данных.</p></div><span id="lnkd09543be70a34bf792def5b7bb339c6d"> </span><div class="section"><p align="justify" class="paragraph-source">     Словарь данных структурирован через таблицы и обзоры, как и любые другие данные в базе данных. Для обращения к словарю данных вы используете SQL. Так как словарь данных можно только читать, пользователи могут выдавать лишь запросы (предложения SELECT) по таблицам и обзорам словаря данных.</p></div><span id="lnkcde45da5fc0b4da1a6ec20b8f5f2a7ff"> </span><h2 align="justify" class="paragraph-headline-source">     Структура словаря данных</h2><span id="lnk62cb46c70ecd4677bef7d0157ddbeed4"> </span><div class="section"><p align="justify" class="paragraph-source">     В состав словаря данных базы данных входят:</p><p align="justify" class="paragraph-source">     а) базовые таблицы: основу словаря данных составляет совокупность таблицы базовых таблиц, хранящих информацию о базе данных. Эти таблицы читаются и пишутся ТОЛЬКО самим ORACLE; они редко используются непосредственно пользователем ORACLE любого типа, потому что они нормализованы, и большая часть данных в них закодирована.</p><p align="justify" class="paragraph-source">     б) доступные пользователю обзоры: словарь данных содержит доступные пользователю обзоры, которые суммируют и отображают в удобном обзоры формате информацию из базовых таблиц словаря. Эти обзоры декодируют информацию базовых таблиц, представляя ее в полезном виде, таком как имена пользователей или таблиц, и используют соединения и фразы WHERE, чтобы упростить информацию. Большинство пользователей имеют доступ к этим обзорам вместо базовых таблиц словаря.</p></div><span id="lnk1e7d77e35a364d89a8fbbba5d23ba4b3"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>SYS, </b><b>владелец словаря данных</b></p></div><span id="lnk2f261cdd7af947eaadbc08f4b774a4c4"> </span><div class="section"><p align="justify" class="paragraph-source">     Все базовые таблицы и обзоры словаря данных принадлежат пользователю ORACLE с учетным именем SYS. Поэтому ни один пользователь ORACLE не должен НИКОГДА изменять никаких объектов, содержащихся в схеме SYS, а администратор безопасности должен строго контролировать использование этого центрального учетного имени.</p></div><span id="lnkd6acb43bc01c4afd9c39187242ad44f8"> </span><table class="note"><tr><td><p align="left" class="note-source">     Замечание: Изменение данных или манипулирование ими в базовых таблицах словаря данных может нанести необратимый ущерб работоспособности базы данных.</p></td><th><img src="../../00/styles/files/note_warning.png" title="Предупреждение" alt="Предупреждение" /></th></tr></table><span id="lnk92788664610444b5b266ef8befbfb2c2"> </span><h2 align="justify" class="paragraph-headline-source">     Как используется словарь данных</h2><span id="lnka993111dcfde4cbe9da1625acd025c3b"> </span><div class="section"><p align="justify" class="paragraph-source">     Словарь данных базы данных ORACLE имеет два основных применения:</p><p align="justify" class="paragraph-source">     - ORACLE обращается к словарю данных каждый раз, когда выдается предложение DDL.</p><p align="justify" class="paragraph-source">     -  Каждый пользователь ORACLE может использовать словарь данных как только-читаемый справочник по базе данных.</p></div><span id="lnk4d31fa7cc0d7456bb09945aedf1ba2d1"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Как ORACLE и другие продукты Oracle используют словарь данных</b></p></div><span id="lnkb97d5702269d43aab650ad20102adba3"> </span><div class="section"><p align="justify" class="paragraph-source">     Данные в базовых таблицах словаря данных необходимы для функционирования ORACLE. Поэтому только ORACLE должен записывать или изменять информацию словаря данных. Во время операций по базе данных ORACLE читает словарь данных, чтобы удостовериться, что нужные объекты существуют, и что пользователи имеют к ним должный доступ. ORACLE также непрерывно обновляет словарь данных, чтобы отражать происходящие изменения в структурах базы данных, аудитинге, грантах и данных. </p></div><span id="lnk973786d339d448f0be308fb1aee72790"> </span><div class="section"><p align="justify" class="paragraph-source">     Например, если пользователь KATHY создает таблицу с именем PARTS, в словарь данных добавляются новые строки, чтобы описать новую таблицу, ее столбцы, сегмент, экстенты, а также привилегии, которые KATHY имеет по этой таблице. Эта новая информация становится видимой при очередном опросе обзоров словаря.</p></div><span id="lnkc85a9ce623c3485f9c53872c3e5fd71a"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Кэширование словаря данных для быстрого доступа </b></p></div><span id="lnka73c0f3d4eb04cf5a6575a1e9a3f6ad6"> </span><div class="section"><p align="justify" class="paragraph-source">     Поскольку ORACLE постоянно обращается к словарю данных для проверки прав доступа пользователей и состояния объектов, большая часть информации словаря данных кэшируется в SGA. Вся информация поддерживается в памяти с помощью алгоритма LRU (т.е. вытесняется наиболее давно использовавшаяся информация). Обычно в кэше поддерживается информация, требуемая для разбора предложений. Столбцы COMMENTS, описывающие таблицы и столбцы, не кэшируются, если они не используются часто.</p></div><span id="lnk03e9192f5bd44fb3a4a67f73496c29e2"> </span><h2 align="justify" class="paragraph-headline-source">     Словарь данных и другие программы </h2><span id="lnk43efde2462284fc19bb40206e1275eef"> </span><div class="section"><p align="justify" class="paragraph-source">     Другие продукты Oracle могут дополнительно создавать в словаре данных свои собственные таблицы и обзоры, а также обращаться к существующим обзора.</p><p align="justify" class="paragraph-source">     Разработчики приложений, которые пишут программы, обращающиеся к словарю данных, должны использовать общие синонимы, а не сами базовые таблицы: эти синонимы менее подвержены изменениям между версиями ORACLE.</p></div><span id="lnk9d0f35e4094e471abe652e8c99bfdd1a"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Добавление новых элементов данных словаря </b></p></div><span id="lnk09199b96143d45d6a0d9d71c3297901e"> </span><div class="section"><p align="justify" class="paragraph-source">     Вы можете добавлять в словарь данных новые таблицы или обзоры. Если вы добавляете новые объекты в словарь данных, их владельцем должен быть SYSTEM или какой-либо третий пользователь ORACLE. Никогда не создавайте новых объектов под учетным именем SYS, если только вы не выполняете скрипт, специально предоставляемый фирмой Oracle для создания новых объектов словаря данных.</p></div><span id="lnk220905a766f245e89841285c9a65d47c"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Удаление элементов словаря данных </b></p></div><span id="lnk8de533c90656413a8becfee202ac0e8d"> </span><div class="section"><p align="justify" class="paragraph-source">     Так как все изменения в словаре данных осуществляются ORACLE в ответ на предложения DDL, НИКАКИЕ ДАННЫЕ В ТАБЛИЦАХ СЛОВАРЯ ДАННЫХ НЕ ДОЛЖНЫ УДАЛЯТЬСЯ ИЛИ ИЗМЕНЯТЬСЯ непосредственно пользователем. Единственное исключение из этого правила представляет таблица SYS.AUD$. Когда включен режим аудитинга, эта таблица может неограниченно расти. Хотя вы не должны удалять эту таблицу, администратор безопасности может удалять из нее данные, потому что строки этой таблицы служат лишь для информации и не являются необходимыми для работы ORACLE.</p></div><span id="lnkfa2048de2efd471581964908d4a02562"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Общие синонимы для обзоров словаря данных </b></p></div><span id="lnkd917aea53a6e43fab5ed62d540563822"> </span><div class="section"><p align="justify" class="paragraph-source">     Общие синонимы создаются для многих обзоров словаря данных, так что они легко доступны всем пользователям. Администратор безопасности может создавать дополнительнные общие синонимы для общесистемных объектов. Однако другие пользователи должны избегать давать своим собственным объектам имена, совпадающие с общими синонимами.</p></div><span id="lnk5d8172399183476a837a07b559d47fe0"> </span><h2 align="justify" class="paragraph-headline-source">     Как пользователи ORACLE могут использовать словарь данных</h2><span id="lnk48a48955a6e9450eba70df1dffc0d477"> </span><div class="section"><p align="justify" class="paragraph-source">     Обзоры словаря данных выступают как справочники для всех пользователей базы данных. Доступ к этим обзорам осуществляется через SQL. Некоторые обзоры доступны всем пользователям, тогда как некоторые другие предназначены лишь для администраторов.</p><p align="justify" class="paragraph-source">     Словарь данных всегда доступен при открытой базе данных. Он размещается в табличном пространстве SYSTEM, которое всегда находится в состоянии онлайн, когда база данных открыта.</p><p align="justify" class="paragraph-source">     Словарь данных состоит из нескольких наборов обзоров. Во многих случаях такой набор состоит из трех обзоров, содержащих аналогичную информацию и отличающихся друг от друга своими префиксами:</p></div><span id="lnkf814610016db4a209a7bbed13200e8ad"> </span><div class="section"><p align="justify" class="paragraph-source">     - Префикс USER - обзор пользователя (что есть в схеме пользователя); </p><p align="justify" class="paragraph-source">     - ALL - расширенный обзор пользователя (к чему есть доступ); </p><p align="justify" class="paragraph-source">     - DBA - обзор администратора (к чему все пользователи имеют доступ).</p></div><span id="lnked0c153a794b431a86c74a3d7c44479b"> </span><div class="section"><p align="justify" class="paragraph-source">     Столбцы в каждом обзоре в наборе идентичны, со следующими исключениями:</p><p align="justify" class="paragraph-source">     - В обзорах с префиксом USER обычно нет столбца с именем OWNER (владелец); в обзорах USER под владельцем подразумевается пользователь, выдавший запрос.</p><p align="justify" class="paragraph-source">     - Некоторые обзоры DBA имеют дополнительные столбцы, которые содержат информацию, полезную для АБД.</p></div><span id="lnkd1118755893444d68b2dacf34ea09096"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Обзоры с префиксом USER</b></p></div><span id="lnk4679b40acaba4b90816e0a01d7e84118"> </span><div class="section"><p align="justify" class="paragraph-source">     Обзоры с префиксом USER представляют наибольший интерес для типичных пользователей базы данных. </p><p align="justify" class="paragraph-source">     Эти обзоры:</p><p align="justify" class="paragraph-source">     - отражают собственное окружение пользователя в базе данных, включая информацию об объектах, созданных этим пользователем, грантах, предоставленных им, и т.д.;</p><p align="justify" class="paragraph-source">     - выдают лишь строки, имеющие отношение к пользователю;</p><p align="justify" class="paragraph-source">     - имеют столбцы, идентичные с другими обзорами, с тем исключением, что столбец OWNER подразумевается (текущий пользователь);</p><p align="justify" class="paragraph-source">     - возвращают подмножество информации, предоставляемой обзорами ALL;</p><p align="justify" class="paragraph-source">     - могут иметь сокращенные общие синонимы для удобства.</p></div><span id="lnkb1978f8615b346c18eef8643891b8993"> </span><div class="section"><p align="justify" class="paragraph-source">     Например, следующий запрос возвращает все объекты, содержащиеся в вашей схеме:</p><p align="justify" class="paragraph-source">SELECT object_name, object_type FROM user_objects;</p></div><span id="lnk904f28ab10ff4e8d8f65f03c098b10f4"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Обзоры с префиксом ALL</b></p></div><span id="lnkc9be66affe9c42d0af2a6dc69f8acded"> </span><div class="section"><p align="justify" class="paragraph-source">     Обзоры с префиксом ALL отражают общее представление о базе данных со стороны пользователя. Эти обзоры возвращают информацию об объектах, к которым пользователь имеет доступ через общие или явные гранты привилегий и ролей, помимо тех объектов, которыми владеет этот пользователь. Например, следующий запрос возвращает информацию обо всех объектах, к которым вы имеете доступ:</p><p align="justify" class="paragraph-source">SELECT owner, object_name, object_type FROM all_objects;</p></div><span id="lnkd1fda4944b724489a13d88f40ade9824"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Обзоры с префиксом DBA</b></p></div><span id="lnk65de5699cdf24314b4a9a2dc56b41d98"> </span><div class="section"><p align="justify" class="paragraph-source">     Обзоры с префиксом DBA показывают общее представление о базе данных, так что они предназначены только для администраторов базы данных. Точнее, опрашивать обзоры словаря с префиксом DBA может любой пользователь, имеющий системную привилегию SELECT ANY TABLE.</p><p align="justify" class="paragraph-source">     Для таких обзоров не создаются синонимы, так как обзоры DBA должны использовать лишь администраторы. Поэтому, чтобы выдать запрос по обзору DBA, администратор должен префиксовать имя обзора именем владельца этого обзора, т.е. SYS, например:</p><p align="justify" class="paragraph-source">SELECT owner, object_name, object_type FROM sys.dba_objects;</p></div><span id="lnk7287a5ea435f48f3ab212f6bae0aeb74"> </span><div class="section"><p align="justify" class="paragraph-source">     Администраторы могут выполнить скрипт DBA_SYNONYMS.SQL, чтобы создать личные синонимы для обзоров DBA под своим учетным именем, если они имеют системную привилегию SELECT ANY TABLE. Выполнение этого скрипта создает синонимы только для текущего пользователя.</p></div><span id="lnk925d27951e0e4ae286d18b18df9f792d"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>DUAL</b></p></div><span id="lnk48bc7a8417f0422c961f5043ff6e1631"> </span><div class="section"><p align="justify" class="paragraph-source">     Таблица с именем DUAL - это крошечная таблица, к которой обращаются как ORACLE, так и пользовательские программы, чтобы гарантировать известный результат. Эта таблица имеет одну строку и один столбец.</p></div><span id="lnk6163067e5d394b96a075ab10f4d830eb"> </span><div class="section"><p align="justify" class="paragraph-source">     <b>Работа со словарем данных</b></p></div><span id="lnk0d1c4d9f53ab4980bdff57562c8ef775"> </span><div class="section"><p align="justify" class="paragraph-source">     Во время работы с SQL*PLUS может возникнуть ситуация, когда необходимо распечатать описание колонок таблицы, или начать и прервать вывод на экран. Также понадобиться объяснение сообщений об ошибках, полученных при неправильном вводе команд или когда возникают проблемы с ORACLE или SQL*PLUS.</p><p align="justify" class="paragraph-source">     Чтобы посмотреть описание каждой колонки в таблице, возможно использование команды SQL*PLUS DESCRIBE (DESC).</p><p align="justify" class="paragraph-source">     Подробную информацию об ошибках можно получить, используя команду SHOW ERROR, результатом выполнения которой будет расшифровка всех ошибок последней команды (или блока команд) SQL с указанием кода ошибки.</p></div><span id="lnkab0074025d114230b370bafa51b9d718"> </span><div class="section"><p align="justify" class="paragraph-source">     После ознакомления с данным материалом рекомендуется выполнить <a title="" target="_self" href="../../02/content/example2.html#lnk645cd2b344714b7e95de7278f3547ecd">лабораторную работу №1</a></p></div></div></td></tr></table></td></tr><tr><td id="bottomOuter"><table id="bottomInner"><tr><td class="cell1"><div> </div></td><td class="cell2"><div>© 2012 ХНУРЭ, ПИ, Широкопетлева М.С., <a href="mailto:mshirokopetleva@gmail.com">mshirokopetleva@gmail.com</a>;   ХНУРЭ, ПИ, Черепанова Ю.Ю.;   ХНУРЭ, ПИ, Мазурова О.А.<br /><a href="http://lersus.de/" title="Данный курс создан с помощью авторской системы LERSUS" target="_blank">Разработано с помощью LERSUS</a></div></td></tr></table></td></tr></table></body></html>