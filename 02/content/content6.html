<html xmlns="http://www.w3.org/1999/xhtml"><head><meta name="generator" content="LERSUS 3.3.0.0" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Корпоративные информационные системы — Теория — Структуры памяти ORACLE</title><script language="javascript" type="text/javascript" src="../../00/styles/files/apiwrapper.js"> </script><script language="javascript" type="text/javascript" src="../../00/styles/files/sco.js"> </script><link href="../../00/styles/files/style.css" rel="stylesheet" type="text/css" /></head><body><table id="mainOuter"><tr><td id="topOuter"><table id="topInner"><tr class="row1"><td class="cell1"><div> </div></td><td class="cell2"><div> </div></td><td class="cell3"><div> </div></td><td class="cell4" id="shortcuts"><div><ul class="level0"><li><a href="../../00/content/authors1.html">Авторы</a></li><li>|</li><li><a href="../../00/content/contacts1.html">Контакты</a></li><li>|</li><li><a href="../../00/content/instructions1.html">Методические указания</a></li><li>|</li><li><a href="../../00/content/annotation1.html">Аннотация</a></li><li>|</li><li><a href="#" onclick="history.back(); return false;">Назад</a></li></ul></div></td></tr><tr class="row2"><td class="cell1"><div> </div></td><td class="cell2"><div> </div></td><td class="cell3"><div> </div></td><td class="cell4"><div id="courseTitle">Корпоративные информационные системы</div><div id="courseSubTitle">Физическая организация БД на примере СУБД Oracle : Структуры памяти ORACLE</div></td></tr></table></td></tr><tr><td id="contentOuter"><table id="contentInner"><tr><td class="menuOuter"><table class="menuInner"><tr><td><ul class="level0"><li><a href="../../00/styles/courses.html">Содержание курса</a></li><li><span>Теория</span></li><ul class="level1"><li><a href="../../02/content/content1.html">Основные концепции СУБД Oracle</a></li><li><a href="../../02/content/content2.html">Логическая структура</a></li><li><a href="../../02/content/content3.html">Экстенты и сегменты</a></li><li><a href="../../02/content/content4.html">Табличные пространства и файлы данных </a></li><li><a href="../../02/content/content5.html">Процессы инстанции Oracle </a></li><li><a href="../../02/content/content6.html">Структуры памяти ORACLE</a></li><li><a href="../../02/content/content7.html">Создание таблиц с распределением памяти </a></li><li><a href="../../02/content/content8.html">Объекты базы данных</a></li><li><a href="../../02/content/content9.html">Утилита SQL*Plus</a></li><li><a href="../../02/content/content10.html">Работа со словарем данных</a></li><li><a href="../../02/content/content11.html">Введение в аудитинг</a></li></ul><li><span>Практика</span></li><ul class="level1"><li><a href="../../02/content/example1.html">Практика 1. Настройка структур памяти при создании основных объектов БД</a></li><li><a href="../../02/content/example2.html">Лабораторная работа 1. Работа с основными объектами базы и служебной информацией</a></li></ul><li><span>Текущий контроль знаний</span></li><ul class="level1"><li><a href="../../02/content/multiply-choice-test1.html">Введение в сервер Oracle</a></li><li><a href="../../02/content/multiply-choice-test9.html">Объекты схемы базы данных Oracle</a></li></ul><li><a href="../../02/styles/glossary.html">Словарь терминов</a></li><li><a href="../../02/02.pdf" target="_blank">Версия для печати</a></li></ul></td></tr></table></td><td class="content"><div id="content"><div id="topBlankStripe"> </div><span id="lnkeb8d42440f864208b02c529cb8ac5547"> </span><h1 align="left" class="headline-source">     Структуры памяти ORACLE</h1><span id="lnkd702dc6472614c6a9b82c2384469daa0"> </span><div class="section"><p align="justify" class="paragraph-source">     ORACLE использует память для хранения следующей информации: </p><p align="justify" class="paragraph-source">     - исполняемого программного кода; </p><p align="justify" class="paragraph-source">     - информации о присоединенной сессии, даже если она неактивна в данный момент; </p><p align="justify" class="paragraph-source">     - данных, необходимых для выполнения программы (например, текущего состояния запроса, из которого извлекаются строки данных); </p><p align="justify" class="paragraph-source">     - информации, которая разделяется и циркулирует между процессами ORACLE (например, информации блокировок); </p><p align="justify" class="paragraph-source">     - кэшируемой информации, которая постоянно хранится в периферийной памяти (например, блоков данных). </p><p align="justify" class="paragraph-source">     Основные структуры памяти, ассоциированные с ORACLE (см. рис. 2), включают: </p><p align="justify" class="paragraph-source">     - области программных кодов; </p><p align="justify" class="paragraph-source">     - глобальную область системы (SGA); </p><p align="justify" class="paragraph-source">     - кэш буферов базы данных; </p><p align="justify" class="paragraph-source">     - буфер журнала повторения; </p><p align="justify" class="paragraph-source">     - разделяемый пул; </p><p align="justify" class="paragraph-source">     - глобальные области программ (PGA); </p><p align="justify" class="paragraph-source">     - области стеков; </p><p align="justify" class="paragraph-source">     - области данных; </p><p align="justify" class="paragraph-source">     - области сортировки. </p><p align="left" class="paragraph-source">     Рассмотрим более подробно эти структуры памяти. </p></div><span id="lnkad591368653e400b9dd3cbe70812d4f3"> </span><h2 align="left" class="paragraph-headline-source">     Виртуальная память</h2><span id="lnked45cb1b580347caa390254b40b29046"> </span><div class="section"><p align="justify" class="paragraph-source">     На многих операционных системах ORACLE использует преимущества <i>виртуальной памяти</i>. <i><b>Виртуальная память </b></i>- это средство операционной системы, которое предоставляет программам больше памяти, чем реально имеется в машине, и обеспечивает больше гибкости в использовании основной памяти. Виртуальная память симулирует память машины, используя комбинацию реальной (основной) памяти и вторичной памяти (обычно на диске). Операционная система осуществляет доступ к виртуальной памяти прозрачно для прикладных программ. </p></div><span id="lnk3eefd243d9134b2185cf7e331665a2af"> </span><table class="note"><tr><td><p align="justify" class="note-source">     Обычно лучше держать всю область SGA в реальной памяти. Программы и остальные части ORACLE могут использовать виртуальную память. </p></td><th><img src="../../00/styles/files/note_comment.png" title="" alt="" /></th></tr></table><span id="lnkd9c5ac8c4d7a467eb2a5b4d6ab8866d8"> </span><h2 align="left" class="paragraph-headline-source">     Области программных кодов</h2><span id="lnk053dca7f52e44ea59f30f7a56404c46f"> </span><div class="section"><p align="justify" class="paragraph-source">     <i><b>Области программных кодов</b></i> - это участки памяти, используемые для хранения кода, который выполняется или может быть выполнен. Код ORACLE хранится в области программного кода, которая обычно отделена от программ пользователей (например, защищена). Области программных кодов обычно статичны, изменяясь лишь при обновлении или повторной инсталляции программного обеспечения. Требуемый размер различен для разных операционных систем.</p><p align="justify" class="paragraph-source">     Программные области являются только-читаемыми, и могут быть инсталлированы как разделяемые или неразделяемые. Когда это возможно, код ORACLE разделяется, так что все пользователи ORACLE могут обращаться к нему, не требуя его дополнительных копий в памяти. Это экономит реальную основную память и улучшает общую производительность.</p><p align="justify" class="paragraph-source">     Пользовательские программы могут быть разделяемыми или неразделяемыми; некоторые инструменты и утилиты ORACLE могут быть инсталлированы как разделяемые (SQL*Forms, SQL*Plus и т.д.), тогда как другие не могут. Несколько инстанций ORACLE, работающих с разными базами данных на одном и том же компьютере, могут разделять один и тот же код ORACLE. Однако, инсталляция программного обеспечения как разделяемого возможна не во всех операционных системах. Например, это невозможно на PC под управлением MS-DOS. </p></div><span id="lnkb970657e81ee49d9bcf0f892d0278f1c"> </span><h2 align="left" class="paragraph-headline-source">     Глобальная область системы (SGA)</h2><span id="lnke28af342a0d44e04a2ab136e7bcfbd88"> </span><div class="section"><p align="justify" class="paragraph-source">     <i><b>Глобальная область системы (SGA) </b></i>- это группа структур разделяемой памяти, распределяемой ORACLE, которая поддерживает данные и управляющую информацию для одной инстанции ORACLE.</p><p align="justify" class="paragraph-source">     Если к одной инстанции одновременно присоединяются несколько пользователей, то данные в области SGA этой инстанции "разделяются" между всеми пользователями. Поэтому SGA и называется глобальной областью системы, или разделяемой глобальной областью.</p><p align="justify" class="paragraph-source">     Память для SGA автоматически распределяется при запуске инстанции и освобождается при закрытии инстанции. Каждая запускаемая инстанция имеет свою собственную SGA.</p><p align="justify" class="paragraph-source">     SGA - это область разделяемой памяти; все пользователи, присоединенные к многопользовательской инстанции базы данных, могут использовать информацию в SGA этой инстанции. Область SGA является обновляемой; во время выполнения ORACLE в нее ведут запись несколько процессов. Информация, хранящаяся в SGA, разделяется на несколько областей памяти, включая:</p><p align="justify" class="paragraph-source">     - буферный кэш базы данных;</p><p align="justify" class="paragraph-source">     - буфер журнала повторения;</p><p align="justify" class="paragraph-source">     - разделяемый пул;</p><p align="justify" class="paragraph-source">     - очереди запросов и ответов (если используется многоканальный сервер);</p><p align="justify" class="paragraph-source">     - кэш словаря данных;</p><p align="justify" class="paragraph-source">     - прочую смешанную информацию.</p></div><span id="lnk2fec693dedec425bbde19e392257de0b"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Буферный кэш базы данных</b></p></div><span id="lnkbed11fdbc1eb412fabcc9df041309ab8"> </span><div class="section"><p align="justify" class="paragraph-source">     Одну часть SGA составляет кэш, в котором хранится информация базы данных. Буфера в буферном кэше содержат копии блоков данных, прочитанных из файлов данных. Эти буфера разделяются всеми пользовательскими процессами ORACLE, присоединенными к инстанции.</p><p align="justify" class="paragraph-source">     Буфера в кэше организованы в два списка: грязный список и список LRU (Least Recently Used). Грязный список содержит грязные буфера, т.е. буфера, которые были модифицированы, но еще не записаны на диск. Список LRU содержит свободные буфера, прикрепленные буфера и грязные буфера, которые еще не перемещены в грязный список. Свободные буфера - это буфера, которые не были модифицированы и доступны для использования. Прикрепленные буфера - это буфера, к которым осуществляется обращение в текущий момент. Когда процесс ORACLE обращается к буферу, он перемещает его в конец списка LRU. По мере непрерывных перемещений буферов в конец списка LRU грязные буфера "стареют" и сдвигаются к началу этого списка. Когда пользовательскому процессу требуется блок, которого еще нет в буферном кэше, он должен прочитать этот блок из файла данных на диске в буфер в кэше. Перед этим процесс должен отыскать свободный буфер. Процесс просматривает список LRU с начала. Поиск продолжается, пока не будет найден свободный буфер, или пока не будет просмотрено число буферов, специфицированное параметром DB_BLOCK_MAX_SCAN_CNT. В процессе поиска свободного буфера процессу могут встречаться грязные буфера. Процесс перемещает их в грязный список и продолжает поиск. Когда процесс находит свободный буфер, он считывает в него блок данных и перемещает его в конец списка LRU.</p><p align="justify" class="paragraph-source">     Если пользовательский процесс ORACLE просмотрел в списке LRU число буферов, равное DB_BLOCK_MAX_SCAN_CNT, но не нашел свободного буфера, то он прекращает поиск и сигнализирует процессу DBWR, чтобы записать часть грязных буферов на диск.</p></div><span id="lnk4cead8aee6a6412baa98d43699305159"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Буфер журнала повторения </b></p></div><span id="lnk59854ce4be3747c4b6f3cefc132343f2"> </span><div class="section"><p align="justify" class="paragraph-source">     <i><b>Буфер журнала повторения </b></i>- это циклический буфер в SGA, который содержит информацию об изменениях, выполненных в базе данных. Эта информация сохраняется в <i>записях повторения</i>. Записи повторения содержат информацию, необходимую для повторения, реконструирования изменений, осуществляемых в базе данных операциями INSERT, UPDATE, DELETE, CREATE, ALTER или DROP; эти записи используются для восстановления базы данных, если необходимо.</p><p align="justify" class="paragraph-source">     Записи повторения копируются серверными процессами ORACLE из памяти пользовательских процессов в буфер журнала повторения в SGA. Записи повторения занимают в этом буфере непрерывное, последовательное пространство. Буфер журнала повторения записывается в активную группу онлайновых файлов журнала повторения на диске фоновым процессом LGWR. </p><p align="justify" class="paragraph-source">     Размер буфера журнала повторения (в байтах) определяется значением параметра инициализации LOG_BUFFER. В общем случае, большие значения уменьшают ввод-вывод, особенно если транзакции длинны или многочисленны. Умалчиваемое значение равно четырехкратному размеру блока данных в вашей операционной системе (не в базе данных).</p></div><span id="lnk0bbda054057440709e2b849464973f1c"> </span><h2 align="left" class="paragraph-headline-source">     Разделяемый пул</h2><span id="lnk5190a7169c614aefacdec654050b569c"> </span><div class="section"><p align="justify" class="paragraph-source">     <i><b>Разделяемый пул </b></i>- это область в SGA, содержащая такие конструкты, как разделяемые области SQL и кэш словаря данных. </p></div><span id="lnk4feb3a636d13440094a8ffc4b825a35e"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Разделяемые области SQL и личные области SQL</b></p></div><span id="lnk7245ec1186354cc0b6a9459d9e7b0e82"> </span><div class="section"><p align="justify" class="paragraph-source">     ORACLE представляет каждое исполняемое им предложение SQL в виде разделяемой части (разделяемой области SQL) и личной части (личная область SQL). ORACLE распознает, когда два пользователя выполняют одинаковое предложение SQL, и использует одну и ту же разделяемую область SQL для обоих. Однако каждый пользователь должен иметь отдельную копию для личной части предложения. </p><p align="justify" class="paragraph-source">     <i><b>Разделяемая область SQL </b></i>- это область памяти, которая содержит дерево разбора и план исполнения для одного предложения SQL. Размер разделяемой области SQL вычисляется во время разбора предложения и зависит от сложности этого предложения. </p><p align="justify" class="paragraph-source">     Разделяемая область SQL всегда находится в разделяемом пуле, и используется совместно всеми идентичными предложениями SQL. </p><p align="justify" class="paragraph-source">     <i><b>Личная область SQL </b></i>- это область памяти, содержащая такие данные, как информация привязки и буфера времени выполнения. Каждая сессия, выдавшая предложение SQL, имеет личную область SQL. Каждый пользователь из тех, кто выдал идентичное предложение SQL, имеет свою собственную личную область SQL, использующую одну разделяемую область SQL; таким образом, с одной и той же разделяемой областью SQL может быть ассоциировано много личных областей SQL. </p><p align="justify" class="paragraph-source">     Личная область SQL далее разбивается на постоянную область и область времени выполнения: </p><p align="justify" class="paragraph-source">     а) <i>Постоянная область </i>содержит информацию привязки, область, которая остается одной и той же между выполнениями. Размер этой области постоянен, и зависит от числа привязок и столбцов, исопльзуемых в предложении. Например, постоянная область тем больше, чем больше столбцов содержит запрос. </p><p align="justify" class="paragraph-source">     б) <i>Область времени выполнения </i>содержит информацию, времени используемую во время исполнения предложения выполнения SQL. Размер этой области зависит от типа и сложности исполняемого предложения SQL, а также от размеров строк, обрабатываемых этим предложением. В общем случае, область времени выполнения несколько больше для предложений INSERT, UPDATE и DELETE, чем для предложения SELECT. Для предложений INSERT, UPDATE и DELETE эта область освобождается после выполнения предложения. Для запросов, эта область освобождается лишь после того, как извлечены все строки, или запрос снят. </p><p align="justify" class="paragraph-source">     Личная область SQL продолжает существовать до тех пор, пока не будет закрыт соответствующий курсор. Так как область времени выполнения освобождается по концу предложения, обычно остается ждать лишь постоянная область. Поэтому при разработке приложений закрывайте все открытые курсоры, которые не будут больше использоваться, чтобы минимизировать объем памяти, требуемый для приложения. Местоположение личной области SQL варьируется в зависимости от типа соединения, установленного для сессии. </p><p align="justify" class="paragraph-source">     Если сессия соединена через выделенный сервер, личные области SQL размещаются в пользовательской области PGA. Однако, если сессия соединена через многоканальный сервер, то ее постоянные области, а также, для предложений SELECT, области времени выполнения, хранятся в SGA. </p><p align="justify" class="paragraph-source">     За управление личными областями SQL отвечает пользовательский процесс. Распределение и освобождение личных областей SQL в большой степени зависит от того, какой инструмент вы используете, хотя число личных областей SQL, которые может распределить пользовательский процесс, всегда лимитируется параметром инициализации OPEN_CURSORS. Умалчиваемое значение этого параметра равно 50. </p></div><span id="lnk1b0fe971fd0a4f9a8233ae41f11fe0ea"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Программные единицы PL/SQL и разделяемый пул</b></p></div><span id="lnk31ba0fea6b8f4fc986cb359c277c461e"> </span><div class="section"><p align="justify" class="paragraph-source">     Обработка программных единиц PL/SQL (процедур, функций, пакетов, анонимных блоков и триггеров базы данных) осуществляется ORACLE в манере, аналогичной обработке индивидуальных предложений SQL. Для хранения разобранной, откомпилированной формы программной единицы распределяется разделяемая область SQL. Личная область SQL распределяется для хранения данных, специфичных для сессии, исполняющей программную единицу, в том числе для значений локальных переменных. Если несколько пользователей одновременно выполняют одну и ту же программную единицу, то все они используют одну и ту же разделяемую область SQL, но отдельные копии личной области SQL, в которых содержатся значения, специфичные для сессии.</p><p align="justify" class="paragraph-source">     Индивидуальные предложения SQL, содержащиеся в программе PL/SQL, обрабатываются как описано в предыдущих секциях. Несмотря на свое происхождение из программной единицы PL/SQL, такие предложения SQL используют разделяемые области SQL для хранения своих разобранных представлений, и личные области SQL для каждой сессии, выполняющей предложение. Единая разделяемая область SQL, используемая для программной единицы PL/SQL, часто называется "родительским курсором", чтобы отличать ее от разделяемых областей SQL, используемых предложениями SQL в этой программной единице, и называемых "порожденными курсорами".</p></div><span id="lnk54099247156c46728407c46bc72edf0d"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Кэш словаря данных</b></p></div><span id="lnka1b10d8958224d8e8346fd9c84b5b507"> </span><div class="section"><p align="justify" class="paragraph-source">     Словарь данных - это коллекция таблиц и обзоров, содержащих справочную информацию о базе данных, ее структурах и ее пользователях. Среди данных, хранящихся в словаре данных, есть следующие: </p><p align="justify" class="paragraph-source">     - имена всех таблиц и обзоров в базе данных;</p><p align="justify" class="paragraph-source">     - имена и типы данных столбцов в таблицах базы данных;</p><p align="justify" class="paragraph-source">     - привилегии всех пользователей ORACLE.</p><p align="justify" class="paragraph-source">     Эта информация полезна как справочный материал не только для администраторов и разработчиков приложений, но и для конечных пользователей. Сам ORACLE часто обращается к словарю данных во время разбора предложений SQL. Доступность словаря является существенной для работоспособности ORACLE. </p><p align="justify" class="paragraph-source">     Так как ORACLE столь часто обращается к словарю данных, в памяти выделяется специальная область для хранения данных словаря. Эта область называется <i><b>кэшем словаря данных</b></i>, или, иногда, <i><b>кэшем строк</b></i>. Кэш словаря данных разделяется всеми пользовательскими процессами ORACLE. Кэш словаря данных содержится в разделяемом пуле внутри SGA. Его размер, вместе с размером библиотечного кэша, лимитируется суммарным размером разделяемого пула. </p></div><span id="lnkcdec7b62aa854dc8b3e55b69ae2f6855"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Распределение и освобождение памяти в разделяемом пуле</b></p></div><span id="lnka926e8e43a25478b9ad96926c2ce23c1"> </span><div class="section"><p align="justify" class="paragraph-source">     В общем, любой элемент в разделяемом пуле (разделяемая область SQL или строка словаря) сохраняется в пуле до тех пор, пока не будет вытеснен в соответствии с модифицированным алгоритмом LRU; память, занимаемая нерегулярно использовавшимися элементами, освобождается, если для новых элементов, которым требуется пространство в разделяемом пуле, не хватает места. Благодаря использованию модифицированного алгоритма LRU элементы разделяемого пула, которые совместно используются несколькими сессиями, могут оставаться в памяти столько, сколько нужно, даже если процесс, первоначально создавший такой элемент, уже прекращен. Как следствие, накладные расходы и обработка предложений SQL, ассоциированных с многопользовательской системой ORACLE, сводятся к минимуму.</p><p align="justify" class="paragraph-source">     Когда предложение SQL предоставляется ORACLE для исполнения, есть несколько шагов, заслуживающих рассмотрения. От имени каждого предложения SQL, ORACLE выполняет следующие шаги по распределению памяти:</p><p align="justify" class="paragraph-source">     а) От имени сессии распределяется личная область SQL. Точное местоположение этой области зависит от вида соединения .</p><p align="justify" class="paragraph-source">     б) ORACLE проверяет разделяемый пул, чтобы отыскать в нем разделяемую область SQL для идентичного предложения SQL. Если такая область уже существует, она используется для всех последующих новых экземпляров данного предложения. Поэтому, вместо того чтобы иметь несколько разделяемых областей SQL для идентичных предложений SQL, лишь одна разделяемая область SQL используется для всех идентичных предложений манипулирования данными, что ведет к большой экономии памяти, особенно когда много пользователей выполняют одно и то же приложение. Альтернативно, если для предложения не найдена разделяемая область SQL, для него в разделяемом пуле распределяется новая разделяемая область SQL. В любом случае, с разделяемой  областью SQL для предложения ассоциируется пользовательская личная область SQL.</p></div><span id="lnkcf249abb1fc34534b67eeadca399bf8f"> </span><table class="note"><tr><td><p align="justify" class="note-source">     Разделяемая область SQL может быть вытеснена из разделяемого пула, даже если она ассоциирована с открытым курсором, который некоторое время не использовался. Если этот открытый курсор будет впоследствии использован для выполнения своего предложения, это предложение будет заново разобрано, и для него будет распределена новая разделяемая область SQL в разделяемом пуле.</p></td><th><img src="../../00/styles/files/note_comment.png" title="" alt="" /></th></tr></table><span id="lnk9fed28d5aff8468daa6505d1be4f1678"> </span><div class="section"><p align="justify" class="paragraph-source">     Разделяемая область SQL также может быть вытеснена из разделяемого пула при некоторых уникальных обстоятельствах.</p><p align="justify" class="paragraph-source">     Когда команда ANALYZE используется для обновления или удаления статистики по таблице, кластеру или индексу, все разделяемые области SQL, которые содержат предложения, ссылающиеся на анализируемый объект, удаляются из разделяемого пула. Когда вытесненное предложение выполняется в следующий раз, оно разбирается в новой разделяемой области SQL, чтобы отразить новую статистику для объекта. Разделяемые области SQL также зависят от объектов, к которым обращаются соответствующие предложения SQL. Если адресуемый объект модифицируется, разделяемая область SQL помечается как <i><b>недействительная</b></i>, и должна быть разобрана заново при очередном выполнении предложения. </p><p align="justify" class="paragraph-source">     Если вы изменяете глобальное имя базы данных, из разделяемого пула удаляется вся информация. Если нужно, администратор может вручную очистить разделяемый пул, чтобы оценить ожидаемую производительность (по отношению к разделяемому пулу, но не к буферному кэшу), не закрывая текущую работающую инстанцию.</p><p align="justify" class="paragraph-source">     Размер SGA определяется при запуске инстанции. Для оптимальной производительности в большинстве систем вся SGA должна размещаться в реальной памяти. Если SGA не помещается целиком в реальной памяти, и для размещения части SGA используется виртуальная память, то общая производительность базы данных может существенно снизиться, потому что порции SGA подвергаются страничному обмену (считываются и записываются на диск) со стороны операционной системы. Основными детерминантами размера SGA являются параметры в файле параметров базы данных. Наибольшее воздействие на размер SGA оказывают следующие параметры: </p><p align="justify" class="paragraph-source">     - DB_BLOCK_SIZE размер в байтах блока данных и буфера базы данных ;</p><p align="justify" class="paragraph-source">     - DB_BLOCK_BUFFERS число буферов базы данных (каждый  размером DB_BLOCK_SIZE), распределяемых для SGA (общее количество памяти, выделяемой для буферного кэша в SGA, равно произведению DB_BLOCK_SIZE на DB_BLOCK_BUFFERS);</p><p align="justify" class="paragraph-source">     - LOG_BUFFER размер в байтах буфера журнала повторения;</p><p align="justify" class="paragraph-source">     - SHARED_POOL_SIZE размер в байтах области, выделяемой для разделяемого пула.</p><p align="justify" class="paragraph-source">     Память, распределенная для области SGA инстанции, выдается при запуске инстанции через SQL*DBA. Вы можете также увидеть текущий размер SGA при помощи команды SQL*DBA SHOW SGA.</p></div><span id="lnkff8077f9ff9a484f87ff0eee17e748b6"> </span><h2 align="left" class="paragraph-headline-source">     Глобальная область программы (PGA)</h2><span id="lnkcd57f9e3416340b797b90991ee0df1a8"> </span><div class="section"><p align="justify" class="paragraph-source">     <i><b>Глобальная область программы (PGA) </b></i>- это область памяти, содержащая данные и управляющую информацию для одного процесса (серверного или фонового). Поэтому она и называется глобальной областью программы, или глобальной областью процесса.</p></div><span id="lnk952426c4e7f445a18df8f6f2b3abda72"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Содержимое PGA</b></p></div><span id="lnk962c929cf7a24a82a6ff559146f6f13b"> </span><div class="section"><p align="justify" class="paragraph-source">     Область PGA распределяется ORACLE, когда пользовательский процесс соединяется с базой данных и создается сессия, хотя это различается для разных операционных систем и конфигураций. </p></div><span id="lnk37a77fc013c24a93ad95e83fe2469dd4"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Область стека</b></p></div><span id="lnk9864c77aa88f43938d46862bd4cc3a9d"> </span><div class="section"><p align="justify" class="paragraph-source">     PGA всегда содержит область стека, распределяемую для хранения переменных, массивов и других данных сессии. Информация сессии PGA в инстанции без многоканального сервера требует дополнительной памяти для сессии пользователя, такой как личные области SQL и т.д. В конфигурации многоканального сервера эта дополнительная память распределяется не в PGA, а в SGA. </p></div><span id="lnka8881893f7834569813a45e56f0c1027"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Разделяемые области SQL</b></p></div><span id="lnkd5217369fb4e47a6b46d875d80405dfa"> </span><div class="section"><p align="justify" class="paragraph-source">     Разделяемые области SQL всегда располагаются в участках разделяемой памяти в SGA (не в PGA), независимо от того, используется ли многоканальный сервер. PGA - это неразделяемая область памяти, в которую процесс может писать. Одна PGA распределяется для каждого процесса сервера; эта PGA монопольно принадлежит данному серверному процессу, и чтение и запись в эту PGA осуществляется лишь кодом ORACLE, действующим от имени этого процесса.</p><p align="justify" class="paragraph-source">     Размер PGA зависит от операционной системы и не является динамическим. Когда клиент и сервер находятся на разных машинах, PGA распределяется на сервере базы данных во время соединения; если для соединения не хватает памяти, возникает ошибка. Это ошибка ORACLE, которая находится в диапазоне номеров ошибок операционной системы. После установления соединения пользователь никогда не может переполнить область PGA; памяти может не хватать лишь в момент установления соединения.</p><p align="justify" class="paragraph-source">     Следующие параметры инициализации влияют на размер PGA:</p><p align="justify" class="paragraph-source">     - OPEN_LINKS;</p><p align="justify" class="paragraph-source">     - DB_FILES;</p><p align="justify" class="paragraph-source">     - LOG_FILES.</p><p align="justify" class="paragraph-source">     Некоторые дополнительные параметры оказывают воздействие на размер области стека в каждой PGA, создаваемой от имени фоновых процессов ORACLE (таких как DBWR и LGWR).</p></div><span id="lnk72f4d465446e446abe1b536e459026fd"> </span><div class="section"><p align="left" class="paragraph-source">     <b>Области сортировки</b></p></div><span id="lnk4f227bf3796944f68439c660e4e17445"> </span><div class="section"><p align="justify" class="paragraph-source">     Для сортировки требуется место в памяти. Участки памяти, в которых ORACLE сортирует данные, называются ОБЛАСТЯМИ СОРТИРОВКИ. Область сортировки существует в памяти пользовательского процесса ORACLE, запрашивающего сортировку. Эта область может расти соответственно объему сортируемых данных, но ограничивается значением параметра инициализации SORT_AREA_SIZE. Это значение выражается в байтах. Умалчиваемое значение зависит от операционной системы. </p></div></div></td></tr></table></td></tr><tr><td id="bottomOuter"><table id="bottomInner"><tr><td class="cell1"><div> </div></td><td class="cell2"><div>© 2012 ХНУРЭ, ПИ, Широкопетлева М.С., <a href="mailto:mshirokopetleva@gmail.com">mshirokopetleva@gmail.com</a>;   ХНУРЭ, ПИ, Черепанова Ю.Ю.;   ХНУРЭ, ПИ, Мазурова О.А.<br /><a href="http://lersus.de/" title="Данный курс создан с помощью авторской системы LERSUS" target="_blank">Разработано с помощью LERSUS</a></div></td></tr></table></td></tr></table></body></html>